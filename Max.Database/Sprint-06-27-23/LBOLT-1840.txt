ALTER TABLE `phone` 
DROP FOREIGN KEY `fk_phone_person_id`;
ALTER TABLE `phone` 
ADD COLUMN `CompanyId` INT NULL DEFAULT NULL AFTER `IsPrimary`,
CHANGE COLUMN `PersonId` `PersonId` INT(11) NULL DEFAULT NULL ,
ADD INDEX `fk_company_id_idx` (`CompanyId` ASC);
;
ALTER TABLE `phone` 
ADD CONSTRAINT `fk_phone_person_id`
  FOREIGN KEY (`PersonId`)
  REFERENCES `person` (`PersonId`)
  ON DELETE CASCADE
  ON UPDATE NO ACTION,
ADD CONSTRAINT `fk_company_id`
  FOREIGN KEY (`CompanyId`)
  REFERENCES `company` (`CompanyId`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

  
INSERT INTO `phone` (`PhoneType`,`PhoneNumber`,`IsPrimary`,`CompanyId`)
SELECT 'Work',Phone,1,CompanyId from company where Phone is not null and phone != ''

